--- vlc_threads.h	2017-11-24 10:29:17.000000000 -0500
+++ vlc_threads.h	2018-07-03 12:35:29.821970509 -0400
@@ -82,6 +82,10 @@
 # define VLC_THREAD_PRIORITY_OUTPUT   THREAD_PRIORITY_ABOVE_NORMAL
 # define VLC_THREAD_PRIORITY_HIGHEST  THREAD_PRIORITY_TIME_CRITICAL
 
+// Moved this declaration above vlc_poll, otherwise Visual Studio has cannot
+// find the symbol
+# define poll(u,n,t) vlc_poll(u, n, t)
+
 static inline int vlc_poll(struct pollfd *fds, unsigned nfds, int timeout)
 {
     int val;
@@ -92,7 +96,6 @@
         vlc_testcancel();
     return val;
 }
-# define poll(u,n,t) vlc_poll(u, n, t)
 
 #elif defined (__OS2__)
 # include <errno.h>
